---
inclusion: always
---

# Project Structure

```
src/
├── app/                    # Next.js App Router
│   ├── api/[feature]/      # API routes (route.ts, [id]/route.ts)
│   ├── [feature]/page.tsx  # Feature pages
│   ├── layout.tsx          # Root layout with providers
│   ├── page.tsx            # Home page
│   └── globals.css         # Global styles & Tailwind
├── components/
│   ├── ui/                 # shadcn/ui (DO NOT edit)
│   ├── [feature]/          # Feature components
│   └── *.tsx               # Shared components
├── lib/
│   ├── db/
│   │   ├── schema.ts       # Drizzle schema (source of truth)
│   │   ├── index.ts        # DB connection export
│   │   └── migrations/     # Auto-generated (DO NOT edit)
│   ├── services/           # Business logic (*.service.ts)
│   └── utils/              # Helpers (validation.ts, recurrence.ts)
├── types/index.ts          # Shared TypeScript types
└── hooks/                  # Custom React hooks
data/                       # SQLite files (gitignored)
```

## Critical Rules

**DO NOT modify:**
- `src/components/ui/*` — shadcn/ui primitives
- `src/lib/db/migrations/*` — auto-generated by Drizzle

**Path alias:** Always use `@/*` for imports from `src/`

## Architecture

| Layer | Location | Responsibility |
|-------|----------|----------------|
| Routes | `app/api/` | HTTP handlers, call services |
| Services | `lib/services/*.service.ts` | Business logic, DB operations |
| Schema | `lib/db/schema.ts` | Drizzle ORM definitions |
| Components | `components/[feature]/` | UI, use Server Components by default |

**Data flow:** Route → Service → Database (via Drizzle)

## Code Style

**Imports** (in order):
1. External packages
2. `@/` aliased imports
3. Relative imports

**Naming:**
- Components: `PascalCase.tsx`
- Services: `kebab-case.service.ts`
- Tests: `*.property.test.ts`

**TypeScript:**
- Strict mode, no `any`
- Explicit return types
- Use Drizzle inferred types: `typeof tasks.$inferSelect`

## Component Patterns

- Default to Server Components; add `'use client'` only when needed (hooks, events, browser APIs)
- Colocate feature components with routes when small
- Extract to `components/[feature]/` when reused or complex
